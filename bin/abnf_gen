#!/usr/bin/env node
"use strict";

const abnf = require("../lib/abnf");

function gen_peggy(er, rules) {
  if (er) {
    console.error("At line:", rules.line);
    console.error(er);
    return;
  }

  console.log(rules.toPeggy());
}

const args = process.argv.slice(2);
if (args.length === 0) {
  abnf.parse(process.stdin, gen_peggy);
  process.stdin.resume();
} else {
  args.forEach(a => abnf.parseFile(a, gen_peggy));
}
